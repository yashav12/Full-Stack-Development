<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algo Trading Bot</title>
    <link rel="stylesheet" href="style-1.css">
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script> -->

</head>
<body>
    <div class="navbar">
      <div class="logo"><b><img src="T-Logo.png"></b></div>
      <div style="font-size:20px;margin-top:3%;color:aliceblue;margin-left:-90px;"><h1><b>ALGO TRADING BOT</b></h1></div>
    </div>
    <div class="controls">
        <button onclick="runOneRound()">Run 1 Round</button>
         <button onclick="runTenRound()">Run 10 Rounds</button>
         <button onclick="resetBot()">Reset</button>
    </div>
    <div class="status">
        <div class="stats">Balance<br><strong id="balance">1000.00</strong></div>
         <div class="stats">Current Holding<br><strong id="price">100.00</strong></div>
          <div class="stats">Holdings<br><strong id="holding">0</strong></div>
           <div class="stats">Round<br><strong id="round">0/10</strong></div>
    </div>
<table border="1" width="100%" style="margin-top:20px;text-align:center;background:#fff">
  <thead>
    <tr>
      <th>Round</th>
      <th>Price</th>
      <th>Action</th>
      <th>Holdings</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody id="tradeTable">
  </tbody>
</table>


   <!-- ðŸ“Œ Is code me kya use hua?

Variables â†’ balance, price, holdings

Operators â†’ + - < > >=

Functions â†’ updatePrice(), decideAction(), trade()

Loop â†’ 10 rounds simulation -->

    <!-- intial setup -->
    <script>
    let balance=1000;
    let stockPrice=100;
    let holdings=0;
    let currentRound=0;
    let maxRounds=10;
    
    //update stck price(80-120) 
    function updatePrice(){
        return Math.floor(Math.random()* (120 - 80 + 1))+80;
    }

    //decide action
    function decideAction(price){
        if(price < 90 && balance >= price){
            return "BUY";}
            if(price > 110 && holdings>0){
                return "SELL";}
                else{
                    return "HOLD";
                }
            }
//execute trade
    function trade(action,price){
    if (action=="BUY"){
        balance-=price;
        holdings+=1;
    }else if(action == "SELL"){
        balance+= price;
        holdings-=1;
    }
}
//run 1 round
function runOneRound(){
    if (currentRound >= maxRounds)
    return;
    let open = stockPrice;
    stockPrice = updatePrice();
    let low = Math.min(open, stockPrice) - Math.random()*5;
    let high = Math.max(open, stockPrice) + Math.random()*5;
    let close = stockPrice;

    const action = decideAction(stockPrice);
    trade(action, stockPrice);

    currentRound++;
    updateUI(action);
}

//reset bot
function resetBot(){
    balance = 1000;
    stockPrice=100;
    holdings=0;
    currentRound=0;
     document.getElementById("tradeTable").innerHTML = "";
    updateUI("RESET");
}

function runBot() {
        document.getElementById("chart").innerHTML = "";

        balance = 1000;
        holdings = 0;

        for (let i = 1; i <= rounds; i++) {
            stockPrice = updatePrice();
            let action = decideAction(stockPrice);
            trade(action, stockPrice);
        }

        document.getElementById("balance").innerText = balance;
        document.getElementById("holdings").innerText = holdings;
    }

function updateUI(action) {
  document.getElementById("balance").innerText = balance.toFixed(2);
  document.getElementById("price").innerText = stockPrice.toFixed(2);
  document.getElementById("holding").innerText = holdings;
  document.getElementById("round").innerText = `${currentRound}/10`;
}

function runTenRound() {
  if (currentRound >= maxRounds) return;

  const interval = setInterval(() => {
    if (currentRound >= maxRounds) {
      clearInterval(interval); // Stop after max rounds
      return;
    }
    runOneRound(); // Run one round every 800ms
  }, 800);
}

function runOneRound(){
    if (currentRound >= maxRounds) return;

    stockPrice = updatePrice();
    const action = decideAction(stockPrice);
    trade(action, stockPrice);

    currentRound++;

    updateUI(action);
    addRowToTable(currentRound, stockPrice, action, holdings, balance);
}


function addRowToTable(round, price, action, holdings, balance) {
    const table = document.getElementById("tradeTable");
    const row = table.insertRow();

    row.insertCell(0).innerText = round;
    row.insertCell(1).innerText = price.toFixed(2);

    const actionCell = row.insertCell(2);  
    actionCell.innerText = action;

    if (action === "BUY") actionCell.classList.add("buy");
    if (action === "SELL") actionCell.classList.add("sell");
    if (action === "HOLD") actionCell.classList.add("hold");

   // row.insertCell(2).innerText = action;
    row.insertCell(3).innerText = holdings;
    row.insertCell(4).innerText = balance.toFixed(2);
  
  }

// Initial UI
updateUI("START");

</script>

</body>
</html>